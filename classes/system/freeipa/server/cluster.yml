classes:
  - service.freeipa.server
parameters:
  freeipa:
    server:
      realm: WORKSHOP.CLOUDLAB.CZ
      domain: workshop.cloudlab.cz
      servers:
        - idm01.workshop.cloudlab.cz
        - idm02.workshop.cloudlab.cz
      admin:
        password: cloudlab
      ldap:
        password: cloudlab
  linux:
    system:
      repo:
        unstable:
          source: "deb http://ftp.cz.debian.org/debian/ unstable main contrib non-free"
          architectures: amd64
          pin:
            - priority: 100
              pin: 'release a=unstable'
            - priority: 600
              package: freeipa-server
              pin: 'release a=unstable'
    network:
      host:
        idm01:
          address: 172.10.10.191
          names:
          - idm01
          - idm01.workshop.cloudlab.cz
        idm02:
          address: 172.10.10.192
          names:
          - idm02
          - idm02.workshop.cloudlab.cz
  openssh:
    server:
      public_key_auth: true
      gssapi_auth: true
      kerberos_auth: false
      authorized_keys_command:
        command: /usr/bin/sss_ssh_authorizedkeys
        user: nobody
